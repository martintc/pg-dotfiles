actions:
  - action: package.install
    list:
      - sudo
      - postgresql-15
      - postgresql-15-auto-failover
  - action: dir.create
    path: /var/lib/postgresql/15/data
  - action: command.run
    command: chown
    args:
      - -R
      - postgres:postgres
      - /var/lib/postgresql/15/data
  - action: command.run
    command: runuser
    args:
      - -u
      - postgres
      - --
      - pg_autoctl
      - create
      - monitor
      - --auth
      - trust
      - --ssl-self-signed
      - --pgctl
      - /usr/lib/postgresql/15/bin/pg_ctl
      - --pgdata
      - /var/lib/postgresql/15/data
